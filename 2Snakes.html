<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; background-color: #333; color: white; font-family: Arial, sans-serif; }
        canvas { border: 2px solid white; display: none; }
        #controls { margin: 20px; }
        #score { font-size: 24px; }
        #game-info { display: none; }
    </style>
</head>
<body>
    <h1>Snake Game</h1>
    <div id="controls">
        <label for="boardSize">Board Size (10-50):</label>
        <input type="number" id="boardSize" min="10" max="50" value="20">
        <label for="snakeSpeed">Snake Speed (1-10):</label>
        <input type="number" id="snakeSpeed" min="1" max="10" value="5">
        <label for="numApples">Number of Apples (1-10):</label>
        <input type="number" id="numApples" min="1" max="10" value="3">
        <label for="powerUpFreq">Power-up Frequency (1-100s):</label>
        <input type="number" id="powerUpFreq" min="1" max="100" value="10">
        <button id="startBtn">Start Game</button>
        <button id="infoBtn">Game Info</button>
    </div>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <div id="score">Score: 0</div>
    <div id="game-info">
        <h2>Game Rules</h2>
        <p>Player 1 (Cyan): W, A, S, D | Player 2 (Teal): Arrow Keys</p>
        <p>Eat apples to grow longer and earn points. Avoid colliding with yourself or the other player!</p>
        <p>Power-ups appear randomly. Collect them for speed or score bonuses.</p>
        <button id="closeInfo">Close</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const startBtn = document.getElementById('startBtn');
        const infoBtn = document.getElementById('infoBtn');
        const gameInfo = document.getElementById('game-info');
        const closeInfo = document.getElementById('closeInfo');

        let boardSize = 20;
        let snakeSpeed = 5;
        let numApples = 3;
        let powerUpFreq = 10;
        let snakes, apples, powerUps, gameInterval, gameRunning, powerUpTimer;
        let score1, score2;

        function initGame() {
            boardSize = parseInt(document.getElementById('boardSize').value);
            snakeSpeed = parseInt(document.getElementById('snakeSpeed').value);
            numApples = parseInt(document.getElementById('numApples').value);
            powerUpFreq = parseInt(document.getElementById('powerUpFreq').value) * 1000;
            snakes = [
                { body: [{ x: 5, y: 5 }], direction: { x: 0, y: 0 }, color: 'cyan' },
                { body: [{ x: 15, y: 15 }], direction: { x: 0, y: 0 }, color: 'teal' }
            ];
            apples = [];
            powerUps = [];
            score1 = 0;
            score2 = 0;
            gameRunning = true;
            scoreDisplay.innerText = 'Score: 0';
            createApples();
            draw();
            canvas.style.display = 'block'; // Show canvas
            gameInterval = setInterval(gameLoop, 100 / snakeSpeed);
            powerUpTimer = setInterval(spawnPowerUp, powerUpFreq);
        }

        function createApples() {
            apples = [];
            for (let i = 0; i < numApples; i++) {
                apples.push({
                    x: Math.floor(Math.random() * boardSize),
                    y: Math.floor(Math.random() * boardSize)
                });
            }
        }

        function spawnPowerUp() {
            const types = ['Speed Up', 'Speed Down', 'Score Up'];
            powerUps.push({
                x: Math.floor(Math.random() * boardSize),
                y: Math.floor(Math.random() * boardSize),
                type: types[Math.floor(Math.random() * types.length)]
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBoard();
            drawSnakes();
            drawApples();
            drawPowerUps();
        }

        function drawBoard() {
            for (let i = 0; i < boardSize; i++) {
                ctx.strokeStyle = 'grey';
                ctx.strokeRect((i * canvas.width) / boardSize, 0, canvas.width / boardSize, canvas.height);
                ctx.strokeRect(0, (i * canvas.height) / boardSize, canvas.width, canvas.height / boardSize);
            }
        }

        function drawSnakes() {
            snakes.forEach(snake => {
                ctx.fillStyle = snake.color;
                snake.body.forEach(part => {
                    ctx.fillRect(part.x * (canvas.width / boardSize), part.y * (canvas.height / boardSize), 
                                 (canvas.width / boardSize), (canvas.height / boardSize));
                });
            });
        }

        function drawApples() {
            ctx.fillStyle = 'red';
            apples.forEach(apple => {
                ctx.fillRect(apple.x * (canvas.width / boardSize), apple.y * (canvas.height / boardSize), 
                             (canvas.width / boardSize), (canvas.height / boardSize));
            });
        }

        function drawPowerUps() {
            powerUps.forEach(powerUp => {
                ctx.fillStyle = 'yellow';
                ctx.fillRect(powerUp.x * (canvas.width / boardSize), powerUp.y * (canvas.height / boardSize), 
                             (canvas.width / boardSize), (canvas.height / boardSize));
                ctx.fillStyle = 'black';
                ctx.fillText(powerUp.type, powerUp.x * (canvas.width / boardSize) + 5, 
                             powerUp.y * (canvas.height / boardSize) + 15);
            });
        }

        function gameLoop() {
            moveSnakes();
            checkCollisions();
            draw();
        }

        function moveSnakes() {
            snakes.forEach(snake => {
                const head = { x: snake.body[0].x + snake.direction.x, y: snake.body[0].y + snake.direction.y };
                wrapAround(head);
                snake.body.unshift(head);
                snake.body.pop();
            });
        }

        function wrapAround(head) {
            if (head.x >= boardSize) head.x = 0;
            if (head.x < 0) head.x = boardSize - 1;
            if (head.y >= boardSize) head.y = 0;
            if (head.y < 0) head.y = boardSize - 1;
        }

        function checkCollisions() {
            snakes.forEach((snake, index) => {
                // Check self-collision
                if (snake.body.slice(1).some(part => part.x === snake.body[0].x && part.y === snake.body[0].y)) {
                    endGame();
                }

                // Check apple collision
                apples.forEach((apple, appleIndex) => {
                    if (snake.body[0].x === apple.x && snake.body[0].y === apple.y) {
                        snake.body.push({ ...snake.body[snake.body.length - 1] });
                        apples.splice(appleIndex, 1);
                        score1 += 10; // Increment score
                        scoreDisplay.innerText = `Score: ${score1}`;
                    }
                });

                // Check power-up collision
                powerUps.forEach((powerUp, powerUpIndex) => {
                    if (snake.body[0].x === powerUp.x && snake.body[0].y === powerUp.y) {
                        handlePowerUp(snake, powerUp);
                        powerUps.splice(powerUpIndex, 1);
                    }
                });
            });

            // Check snake collision
            if (snakes[0].body[0].x === snakes[1].body[0].x && snakes[0].body[0].y === snakes[1].body[0].y) {
                endGame();
            }
        }

        function handlePowerUp(snake, powerUp) {
            if (powerUp.type === 'Speed Up') {
                snakeSpeed = Math.min(10, snakeSpeed + 1);
            } else if (powerUp.type === 'Speed Down') {
                snakeSpeed = Math.max(1, snakeSpeed - 1);
            } else if (powerUp.type === 'Score Up') {
                score1 += 20; // Increment score
                scoreDisplay.innerText = `Score: ${score1}`;
            }
            clearInterval(gameInterval);
            gameInterval = setInterval(gameLoop, 100 / snakeSpeed);
        }

        function endGame() {
            clearInterval(gameInterval);
            clearInterval(powerUpTimer);
            alert(`Game Over! Final Score: ${score1}`);
            document.location.reload(); // Reload the game
        }

        function controlSnake(event) {
            if (event.key === 'w' && snakes[0].direction.y === 0) {
                snakes[0].direction = { x: 0, y: -1 };
            } else if (event.key === 's' && snakes[0].direction.y === 0) {
                snakes[0].direction = { x: 0, y: 1 };
            } else if (event.key === 'a' && snakes[0].direction.x === 0) {
                snakes[0].direction = { x: -1, y: 0 };
            } else if (event.key === 'd' && snakes[0].direction.x === 0) {
                snakes[0].direction = { x: 1, y: 0 };
            }
            // Player 2 controls
            if (event.key === 'ArrowUp' && snakes[1].direction.y === 0) {
                snakes[1].direction = { x: 0, y: -1 };
            } else if (event.key === 'ArrowDown' && snakes[1].direction.y === 0) {
                snakes[1].direction = { x: 0, y: 1 };
            } else if (event.key === 'ArrowLeft' && snakes[1].direction.x === 0) {
                snakes[1].direction = { x: -1, y: 0 };
            } else if (event.key === 'ArrowRight' && snakes[1].direction.x === 0) {
                snakes[1].direction = { x: 1, y: 0 };
            }
        }

        document.addEventListener('keydown', controlSnake);
        startBtn.addEventListener('click', initGame);
        infoBtn.addEventListener('click', () => gameInfo.style.display = 'block');
        closeInfo.addEventListener('click', () => gameInfo.style.display = 'none');
    </script>
</body>
</html>
